<!-- views/definicoes.ejs -->
<div class="toolbar">
  <h1>Definições</h1>
  <div style="margin-left:auto;display:flex;gap:8px;flex-wrap:wrap">
    <a class="btn btn-light" href="/dashboard">← Voltar</a>
    <a class="btn" href="/definicoes/rodizio">Rodízio (casais)</a>
  </div>
</div>

<% if (err) { %>
  <div class="alert"><%= err %></div>
<% } %>
<% if (msg) { %>
  <div class="alert success"><%= msg %></div>
<% } %>

<!-- ================== Branding / UI ================== -->
<section class="card">
  <h3>Branding & UI</h3>
  <form method="post" action="/definicoes" class="form-grid">
    <% KEYS.forEach(k => { %>
      <label><%= k.label %>
        <input type="<%= k.type %>" name="<%= k.key %>" value="<%= map[k.key] || '' %>" />
      </label>
    <% }) %>
    <button class="btn btn-primary">Guardar</button>
  </form>
</section>

<!-- ================== O meu perfil ================== -->
<section class="card" style="margin-top:12px">
  <h3>O meu perfil</h3>
  <form method="post" action="/definicoes/perfil" class="form-grid">
    <label>Nome
      <input name="name" value="<%= me.name %>" required>
    </label>
    <label>Email
      <input type="email" name="email" value="<%= me.email %>" required>
    </label>

    <div style="grid-column:1/-1"><strong>Alterar password (opcional)</strong></div>
    <label>Password atual
      <input type="password" name="current_password">
    </label>
    <label>Nova password
      <input type="password" name="new_password">
    </label>
    <label>Confirmar nova
      <input type="password" name="confirm_password">
    </label>

    <button class="btn">Guardar perfil</button>
  </form>
</section>

<!-- ================== Rodízio (atalho) ================== -->
<section class="card" style="margin-top:12px">
  <h3>Rodízio (casais)</h3>
  <p class="muted" style="margin:6px 0 12px">
    Define o tamanho do bloco, vê o resto disponível e aplica valores a casais.
  </p>
  <a class="btn btn-primary" href="/definicoes/rodizio">Abrir rodízio</a>
</section>
